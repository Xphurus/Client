<!-- assessment-form.component.html -->

<form [formGroup]="assessmentForm">
  <h2>Assessment Form</h2>
  <div>
    <label for="name">Name:</label>
    <input type="text" id="name" formControlName="name" required>
  </div>
  <div>
    <label for="description">Description:</label>
    <input type="text" id="description" formControlName="description" required>
  </div>
  <div>
    <label for="code">Code:</label>
    <input type="text" id="code" formControlName="code" required>
  </div>
  <div>
    <label for="isStrict">Is Strict:</label>
    <input type="checkbox" id="isStrict" formControlName="isStrict">
  </div>
  <div>
    <label for="startDate">Start Date:</label>
    <input type="date" id="startDate" formControlName="startDate" required>
  </div>
  <div>
    <label for="endDate">End Date:</label>
    <input type="date" id="endDate" formControlName="endDate" required>
  </div>
  <div>
    <label for="duration">Duration:</label>
    <input type="text" id="duration" formControlName="duration" required>
  </div>

  <!-- Codings -->
  <div formArrayName="codings">
    <h3>Codings</h3>
    <div *ngFor="let coding of codingsFormArray.controls; let i = index" [formGroupName]="i">
      <div>
        <label for="codingTitle">Coding Title:</label>
        <input type="text" id="codingTitle" formControlName="title" required>
      </div>
      <div>
        <label for="prompt">Prompt:</label>
        <textarea id="prompt" formControlName="prompt" required></textarea>
      </div>
      <div>
        <label for="language">Language:</label>
        <input type="text" id="language" formControlName="language" required>
      </div>
      <div>
        <label for="inputFormat">Input Format:</label>
        <textarea id="inputFormat" formControlName="inputFormat" required></textarea>
      </div>
      <div>
        <label for="outputFormat">Output Format:</label>
        <textarea id="outputFormat" formControlName="outputFormat" required></textarea>
      </div>
      <div>
        <label for="constrain1">Constrain 1:</label>
        <input type="text" id="constrain1" formControlName="constrain1">
      </div>
      <div>
        <label for="constrain2">Constrain 2:</label>
        <input type="text" id="constrain2" formControlName="constrain2">
      </div>
      <div>
        <label for="constrain3">Constrain 3:</label>
        <input type="text" id="constrain3" formControlName="constrain3">
      </div>

      <!-- Evaluation Cases -->
      <div formArrayName="evaluationCases">
        <h4>Evaluation Cases</h4>
        <div *ngFor="let evaluationCase of coding.get('evaluationCases').value let j = index" [formGroupName]="j" trackBy:trackByFn>
          <div>
            <label for="inputCase">Input Case:</label>
            <input type="text" id="inputCase" formControlName="inputCase">
          </div>
          <div>
            <label for="outputCase">Output Case:</label>
            <input type="text" id="outputCase" formControlName="outputCase">
          </div>
          <button type="button" (click)="removeEvaluationCase(coding.get('evaluationCases'), j)">Remove Evaluation Case</button>
        </div>
        <button type="button" (click)="addEvaluationCase(coding.get('evaluationCases'))">Add Evaluation Case</button>
      </div>

      <button type="button" (click)="removeCoding(i)">Remove Coding</button>
    </div>
    <button type="button" (click)="addCoding()">Add Coding</button>
  </div>

  <!-- MCQs -->
  <div formArrayName="mcQs">
    <h3>MCQs</h3>
    <div *ngFor="let mcq of mcQsFormArray.controls; let i = index" [formGroupName]="i">
      <div>
        <label for="mcqQuestion">MCQ Question:</label>
        <textarea id="mcqQuestion" formControlName="question" required></textarea>
      </div>
      <div>
        <label for="correctAnswer">Correct Answer:</label>
        <input type="number" id="correctAnswer" formControlName="correctAnswer" required>
      </div>

      <!-- Options -->
      <div formArrayName="options">
        <h4>Options</h4>
        <div *ngFor="let option of mcq.get('options').value; let j = index" [formGroupName]="j" trackBy:trackByFn>
          <div>
            <label for="optionValue">Option Value:</label>
            <input type="text" id="optionValue" formControlName="value" required>
          </div>
          <button type="button" (click)="removeOption(mcq.get('options'), j)">Remove Option</button>
        </div>
        <button type="button" (click)="addOption(mcq.get('options'))">Add Option</button>
      </div>

      <button type="button" (click)="removeMcQ(i)">Remove MCQ</button>
    </div>
    <button type="button" (click)="addMcQ()">Add MCQ</button>
  </div>

  <button type="submit" (click)="submut()" >Submit</button>
</form>
